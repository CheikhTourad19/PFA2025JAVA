<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.web.WebView?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<?import java.net.URL?>
<AnchorPane prefHeight="521.0" prefWidth="730.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="pfa.java.pfa2025java.controllers.patient.AccueilController">
    <!-- Sidebar -->
    <VBox alignment="CENTER_LEFT" layoutX="-2.0" prefHeight="521.0" prefWidth="206.0" spacing="10" style="-fx-background-color: #2C3E50; -fx-padding: 10;"
          AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="-2.0" AnchorPane.topAnchor="0.0">
        <Text fx:id="nomUtil" fill="#eeebeb" strokeType="OUTSIDE" strokeWidth="0.0" textAlignment="CENTER">
            <font>
                <Font size="23.0" />
            </font>
        </Text>
        <Button onAction="#consulterProfil" text="Profil" style="-fx-cursor: hand; -fx-background-color: #34495E; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button onAction="#consulterOrdonnances" text="Mes Ordonnances" style="-fx-cursor: hand; -fx-background-color: #34495E; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button text="Mes RDV" style="-fx-cursor: hand; -fx-background-color: #27AE60; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button onAction="#consulterPharmacies" text="Consulter Pharmacies" style="-fx-cursor: hand; -fx-background-color: #34495E; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button onAction="#demandeRendezVous" text="Demande RDV" style="-fx-cursor: hand; -fx-background-color: #34495E; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button onAction="#chatbot" text="Ouvrir Chat" style="-fx-cursor: hand; -fx-background-color: #2980B9; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
        <Button onAction="#logout" text="Déconnexion" style="-fx-cursor: hand; -fx-background-color: #E74C3C; -fx-text-fill: white; -fx-pref-width: 180; -fx-font-size: 14px; -fx-font-weight: bold;" />
    </VBox>

    <!-- Main Content -->
    <VBox alignment="TOP_CENTER" layoutX="205.0" prefHeight="521.0" prefWidth="524.0" spacing="16.0">
        <children>
            <Text fontSmoothingType="LCD" strokeType="OUTSIDE" strokeWidth="0.0" text="Mes Rendez-vous" textAlignment="CENTER">
                <font>
                    <Font name="Arial Bold" size="23.0" />
                </font>
            </Text>
            <TableView fx:id="TVRDV" prefHeight="200.0" prefWidth="200.0">
                <columns>
                    <TableColumn fx:id="TcMedecin" prefWidth="178.4" text="Médecin" />
                    <TableColumn fx:id="TcDate" prefWidth="211.2" text="Date" />
                    <TableColumn fx:id="TcStatus" prefWidth="126.4" text="Statut" />
                </columns>
            </TableView>
        </children>
        <padding>
            <Insets top="28.0" />
        </padding>
    </VBox>

    <!-- Chatbot Container (Initially Hidden) -->
    <StackPane fx:id="chatbotContainer" visible="false" style="-fx-background-color: rgba(0, 0, 0, 0.7);"
               AnchorPane.topAnchor="50.0" AnchorPane.leftAnchor="215.0" AnchorPane.rightAnchor="10.0" AnchorPane.bottomAnchor="50.0">
        <WebView fx:id="chatbotWebView" prefHeight="400.0" prefWidth="500.0" />
    </StackPane>

    <!-- Floating Chatbot Button (Bottom Right Corner) -->
    <Button fx:id="chatbotIconButton" onAction="#toggleChatbot"
            style="-fx-background-color: transparent; -fx-padding: 0; -fx-cursor: hand;"
            AnchorPane.rightAnchor="20.0" AnchorPane.bottomAnchor="20.0">
        <graphic>
            <ImageView fx:id="chatbotIcon" fitHeight="50.0" fitWidth="50.0" />
        </graphic>
    </Button>

    <!-- Stylesheet -->
    <stylesheets>
        <URL value="@../../Style/patient/accueilRDV.css" />
    </stylesheets>
</AnchorPane>
