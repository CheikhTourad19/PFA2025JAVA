<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

<AnchorPane prefHeight="681.0" prefWidth="800.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="pfa.java.pfa2025java.controllers.pharmacie.OrdonnanceController">
    <!-- Sidebar Navigation -->
    <AnchorPane prefHeight="681.0" prefWidth="170.0" style="-fx-background-color: #2C3E50;">
        <VBox layoutX="10.0" layoutY="150.0" prefWidth="150.0" spacing="15" style="-fx-background-color: #2C3E50; -fx-padding: 15;">
            <Button onAction="#gotoaccueil" style="-fx-background-color: #34495E; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 180;" text="Accueil" />
            <Button style="-fx-background-color: #27AE60; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 180px;" text="Ordonnance" />
            <Button fx:id="stockButton" onAction="#gotostock" style="-fx-background-color: #34495E; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 180px;" text="Stock" />
            <Button onAction="#logout" style="-fx-background-color: #E74C3C; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-pref-width: 180px;" text="Déconnexion" />
        </VBox>
        <ImageView fitHeight="100.0" fitWidth="150.0" layoutX="10.0" layoutY="20.0" pickOnBounds="true">
            <Image url="@../../assets/pharamalogo.png" />
        </ImageView>
    </AnchorPane>

    <!-- Main Content -->
    <VBox layoutX="191.0" layoutY="10.0" prefHeight="583.0" prefWidth="580.0" spacing="15">
        <Text style="-fx-font-size: 18px; -fx-fill: #34495E; -fx-font-weight: bold;" text="Chercher ordonnance par code" />

        <HBox spacing="10">
            <TextField fx:id="code" prefWidth="350.0" promptText="Insérer code..." style="-fx-background-radius: 10; -fx-padding: 10;" />
            <Button onAction="#search" style="-fx-background-color: #3498DB; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10;" text="Chercher" />
         <ProgressIndicator fx:id="loading" prefHeight="31.0" prefWidth="57.0" />
        </HBox>

        <Text fx:id="medecinname" style="-fx-font-size: 15px; -fx-fill: #2C3E50;" text="Médecin:" />
        <Text fx:id="patientname" style="-fx-font-size: 15px; -fx-fill: #2C3E50;" text="Patient:" />

        <TableView fx:id="ordonnannceTable" prefHeight="250.0" style="-fx-background-color: white; -fx-border-radius: 10; -fx-padding: 10;">
            <columns>
                <TableColumn fx:id="Medicamentcolumn" prefWidth="180.0" text="Médicament" />
                <TableColumn fx:id="quantiteColumn" prefWidth="80.0" text="Quantité" />
                <TableColumn fx:id="dispoColumn" prefWidth="80.0" text="disponible" />
                <TableColumn fx:id="prixColumn" prefWidth="80.0" text="prix" />
                <TableColumn fx:id="instructionColumn" prefWidth="320.0" text="Instructions" />
            </columns>
        </TableView>

        <Button onAction="#retirer" style="-fx-background-color: #27AE60; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10;" text="Valider Ordonnance" />
        <Text fx:id="total" style="-fx-font-size: 18px; -fx-fill: #34495E; -fx-font-weight: bold;" text="Total : " />
        <Button fx:id="exportPdfButton" onAction="#exportToPdf" style="-fx-background-color: #E67E22; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10;" text="Exporter en PDF" />

    </VBox>
</AnchorPane>
